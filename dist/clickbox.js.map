{"version":3,"file":"clickbox.js","mappings":"yqCAAMA,EAAAA,WAKJ,WAAYC,I,4FAAO,yDAJR,OAIQ,4BAFT,2BAGRC,KAAKC,SAASF,G,4CAGhB,SAASA,GAGP,O,EAFgBA,E,2IAAhBC,K,IAAA,E,UAEOA,K,sCAGT,SAAeE,EAAOC,GAAU,WACxBC,EAAK,EAAAJ,KAAH,UAAGA,KAAoBE,GACzBG,EAAQC,OAAOC,Q,+VAAP,EACZR,MAAO,EAAAC,KAAF,IACFE,IACFM,QAAO,SAACC,EAAD,O,IAAA,G,EAAA,E,4CAAA,I,gxBAAIC,EAAJ,KAAMC,EAAN,YAAcF,EAAEG,KAAKF,EAAE,KAAiB,kBAALC,EAAkBA,EAAI,EAAI,EAAKA,IAAIF,IAAG,IAChFI,KAAK,KAERT,EAAGU,IAAH,YAAYd,KAAZ,eAA4BK,GAiB5BU,OAAOC,iBAAiB,WAfP,SAAXC,EAAY,GAAwC,QAAvCC,KAAOC,EAAgC,EAAhCA,OAAOD,EAAyB,EAAzBA,KAC/B,GADwD,EAAnBE,OAAmB,EAAZC,QAC/BjB,EAAGkB,cACd,IACe,UAAVH,GAAuBjB,EAAOqB,UAC/BpB,EAASe,GAEX,MAAOM,GACPC,QAAQD,MAAMA,GALhB,QAOET,OAAOW,oBAAoB,UAAWT,GACtC,IAAI,KAAJ,OAAmBb,OAOzBuB,SAASC,KAAKC,YAAYzB,M,sBA1CxBN,G,aA8CF,IAAMM,EAAKuB,SAASG,cAAc,UAgBlC,OAfA1B,EAAG2B,MAAH,4NAWA3B,EAAG4B,aAAa,cAAc,GAC9B5B,EAAG4B,aAAa,qBAAoB,GACpC5B,EAAG6B,MAAQ,qBAEJ7B,E,WAGKA,GACZA,EAAG8B,SAIJnB,OAAOoB,uBACRpB,OAAOoB,sBAAsBrC,I","sources":["webpack://clickbox-widget/./src/index.js"],"sourcesContent":["class Clickbox {\n  #__token = null\n  // #__host = 'https://clickbox-locations.vercel.app/'\n  #__host = 'http://localhost:8081/'\n\n  constructor(token) {\n    this.setToken(token)\n  }\n\n  setToken(token) {\n    this.#__token = token\n\n    return this\n  }\n\n  selectLocation(params,callback) {\n    const el = this.#__createModal(params)\n    const query = Object.entries({\n      token: this.#__token,\n      ...params\n    }).reduce((c,[k,v]) => (c.push(k+'='+(typeof v == \"boolean\" ? (v ? 1 : 0) : v)),c),[])\n      .join('&')\n\n    el.src = `${this.#__host}?${query}`\n\n    const listener = ({data: {action,data},origin,source}) => {\n      if(source == el.contentWindow) {\n        try {\n          if(action == 'select' && !params.readonly) {\n            callback(data)\n          }\n        } catch (error) {\n          console.error(error)\n        } finally {\n          window.removeEventListener(\"message\", listener);\n          this.#__closeModal(el)\n        }\n      }\n    }\n\n    window.addEventListener(\"message\", listener);\n\n    document.body.appendChild(el)\n  }\n\n  #__createModal() {\n    const el = document.createElement('iframe')\n    el.style = `\n      position: fixed; \n      display: block; \n      width: 100%; \n      height: 100%; \n      top: 0px; \n      left: 0px; \n      box-sizing: content-box; \n      z-index: 2147483647; \n      opacity: 1;'\n    `\n    el.setAttribute('frameborder',0)\n    el.setAttribute('allowtransparency',true)\n    el.title = 'Clickbox Locations'\n\n    return el\n  }\n\n  #__closeModal(el) {\n    el.remove()\n  }\n}\n\nif(window.clickboxAsyncCallback) {\n  window.clickboxAsyncCallback(Clickbox)\n}\n\nexport default Clickbox"],"names":["Clickbox","token","this","setToken","params","callback","el","query","Object","entries","reduce","c","k","v","push","join","src","window","addEventListener","listener","data","action","origin","source","contentWindow","readonly","error","console","removeEventListener","document","body","appendChild","createElement","style","setAttribute","title","remove","clickboxAsyncCallback"],"sourceRoot":""}