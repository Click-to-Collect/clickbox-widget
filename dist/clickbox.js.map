{"version":3,"file":"clickbox.js","mappings":"yqCAAMA,EAAAA,WAKJ,cAEG,I,IADDC,EACC,EADDA,e,4FACC,yDANQ,OAMR,4BALO,2C,EAMQA,E,2IAAhBC,K,IAAA,E,4DAGF,SAAeC,EAAOC,GAAU,WACxBC,EAAK,EAAAH,KAAH,UAAGA,KAAoBC,GACzBG,EAAQC,OAAOC,Q,+VAAP,EACZP,cAAe,EAAAC,KAAF,IACVC,IACFM,QAAO,SAACC,EAAD,O,IAAA,G,EAAA,E,4CAAA,I,gxBAAIC,EAAJ,KAAMC,EAAN,YAAcF,EAAEG,KAAKF,EAAE,KAAiB,kBAALC,EAAkBA,EAAI,EAAI,EAAKA,IAAIF,IAAG,IAChFI,KAAK,KAERT,EAAGU,IAAH,YAAYb,KAAZ,eAA4BI,GAY5BU,OAAOC,iBAAiB,WAVP,SAAXC,EAAY,GAAwC,QAAvCC,KAAOC,EAAgC,EAAhCA,OAAOD,EAAyB,EAAzBA,KAAyB,EAAnBE,OAAmB,EAAZC,QAC/BjB,EAAGkB,gBACD,UAAVH,GAAuBjB,EAAOqB,UAC/BpB,EAASe,GAEXH,OAAOS,oBAAoB,UAAWP,GACtC,IAAI,KAAJ,OAAmBb,OAMvBqB,SAASC,KAAKC,YAAYvB,M,sBAjCxBL,G,aAqCF,IAAMK,EAAKqB,SAASG,cAAc,UAgBlC,OAfAxB,EAAGyB,MAAH,4NAWAzB,EAAG0B,aAAa,cAAc,GAC9B1B,EAAG0B,aAAa,qBAAoB,GACpC1B,EAAG2B,MAAQ,qBAEJ3B,E,WAGKA,GACZA,EAAG4B,SAIJjB,OAAOkB,uBACRlB,OAAOkB,sBAAsBlC,I","sources":["webpack://clickbox-widget/./src/index.js"],"sourcesContent":["class Clickbox {\n  #__token = null\n  #__host = 'https://clickbox-locations.vercel.app/'\n  // #__host = 'http://localhost:8081/'\n\n  constructor({\n    merchantToken\n  }) {\n    this.#__token = merchantToken\n  }\n\n  selectLocation(params,callback) {\n    const el = this.#__createModal(params)\n    const query = Object.entries({\n      merchantToken: this.#__token,\n      ...params\n    }).reduce((c,[k,v]) => (c.push(k+'='+(typeof v == \"boolean\" ? (v ? 1 : 0) : v)),c),[])\n      .join('&')\n\n    el.src = `${this.#__host}?${query}`\n\n    const listener = ({data: {action,data},origin,source}) => {\n      if(source == el.contentWindow) {\n        if(action == 'select' && !params.readonly) {\n          callback(data)\n        }\n        window.removeEventListener(\"message\", listener);\n        this.#__closeModal(el)\n      }\n    }\n\n    window.addEventListener(\"message\", listener);\n\n    document.body.appendChild(el)\n  }\n\n  #__createModal() {\n    const el = document.createElement('iframe')\n    el.style = `\n      position: fixed; \n      display: block; \n      width: 100%; \n      height: 100%; \n      top: 0px; \n      left: 0px; \n      box-sizing: content-box; \n      z-index: 2147483647; \n      opacity: 1;'\n    `\n    el.setAttribute('frameborder',0)\n    el.setAttribute('allowtransparency',true)\n    el.title = 'Clickbox Locations'\n\n    return el\n  }\n\n  #__closeModal(el) {\n    el.remove()\n  }\n}\n\nif(window.clickboxAsyncCallback) {\n  window.clickboxAsyncCallback(Clickbox)\n}\nexport default Clickbox"],"names":["Clickbox","merchantToken","this","params","callback","el","query","Object","entries","reduce","c","k","v","push","join","src","window","addEventListener","listener","data","action","origin","source","contentWindow","readonly","removeEventListener","document","body","appendChild","createElement","style","setAttribute","title","remove","clickboxAsyncCallback"],"sourceRoot":""}