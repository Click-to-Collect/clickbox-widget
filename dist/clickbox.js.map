{"version":3,"file":"clickbox.js","mappings":"yuBAAMA,EAAAA,WAKJ,cAEG,I,IADDC,EACC,EADDA,e,4FACC,yDANQ,OAMR,4BALO,2C,EAMQA,E,2IAAhBC,K,IAAA,E,6DAGF,SAAeC,EAAOC,GAAU,WACxBC,EAAK,EAAAH,KAAH,UAAGA,KAAoBC,GACzBG,EAAQ,IAAIC,gBAAgBJ,GAElCG,EAAME,OAAO,gBAAb,EAA6BN,KAA7B,IAEAG,EAAGI,IAAM,YAAGP,KAAH,QAAqBI,EAAMI,WAYpCC,OAAOC,iBAAiB,WAVP,SAAXC,EAAY,GAAwC,QAAvCC,KAAOC,EAAgC,EAAhCA,OAAOD,EAAyB,EAAzBA,KAAyB,EAAnBE,OAAmB,EAAZC,QAC/BZ,EAAGa,gBACD,UAAVH,GAAuBZ,EAAOgB,UAC/Bf,EAASU,GAEXH,OAAOS,oBAAoB,UAAWP,GACtC,IAAI,KAAJ,OAAmBR,OAMvBgB,SAASC,KAAKC,YAAYlB,Q,mBA/BxBL,G,aAmCF,IAAMK,EAAKgB,SAASG,cAAc,UAgBlC,OAfAnB,EAAGoB,MAAH,4NAWApB,EAAGqB,aAAa,cAAc,GAC9BrB,EAAGqB,aAAa,qBAAoB,GACpCrB,EAAGsB,MAAQ,qBAEJtB,E,WAGKA,GACZA,EAAGuB,SAIJjB,OAAOkB,uBACRlB,OAAOkB,sBAAsB7B,I","sources":["webpack://clickbox-widget/./src/index.js"],"sourcesContent":["class Clickbox {\n  #__token = null\n  #__host = 'https://clickbox-locations.vercel.app/'\n  // #__host = 'http://localhost:8081/'\n\n  constructor({\n    merchantToken\n  }) {\n    this.#__token = merchantToken\n  }\n\n  selectLocation(params,callback) {\n    const el = this.#__createModal(params)\n    const query = new URLSearchParams(params)\n\n    query.append('merchantToken',this.#__token)\n\n    el.src = `${this.#__host}?` + query.toString()\n\n    const listener = ({data: {action,data},origin,source}) => {\n      if(source == el.contentWindow) {\n        if(action == 'select' && !params.readonly) {\n          callback(data)\n        }\n        window.removeEventListener(\"message\", listener);\n        this.#__closeModal(el)\n      }\n    }\n\n    window.addEventListener(\"message\", listener);\n\n    document.body.appendChild(el)\n  }\n\n  #__createModal() {\n    const el = document.createElement('iframe')\n    el.style = `\n      position: fixed; \n      display: block; \n      width: 100%; \n      height: 100%; \n      top: 0px; \n      left: 0px; \n      box-sizing: content-box; \n      z-index: 2147483647; \n      opacity: 1;'\n    `\n    el.setAttribute('frameborder',0)\n    el.setAttribute('allowtransparency',true)\n    el.title = 'Clickbox Locations'\n\n    return el\n  }\n\n  #__closeModal(el) {\n    el.remove()\n  }\n}\n\nif(window.clickboxAsyncCallback) {\n  window.clickboxAsyncCallback(Clickbox)\n}\nexport default Clickbox"],"names":["Clickbox","merchantToken","this","params","callback","el","query","URLSearchParams","append","src","toString","window","addEventListener","listener","data","action","origin","source","contentWindow","readonly","removeEventListener","document","body","appendChild","createElement","style","setAttribute","title","remove","clickboxAsyncCallback"],"sourceRoot":""}